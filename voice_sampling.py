import machine
import utime

# Set up microphone
mic = machine.ADC(26)

# Define callback function for voice command detection
def print_hello():
    print("hello")

# Continuously listen for voice commands
while True:
    # Adjust for ambient noise
    utime.sleep(1)
    ambient_noise = sum(mic.read_u16() for _ in range(100)) / 100

    # Wait for voice command
    while True:
        # Check if input exceeds threshold
        if mic.read_u16() > ambient_noise * 1.6:
            # Record audio sample
            sample = []
            for i in range(100):
                sample.append(mic.read_u16())
                utime.sleep(0.001)
                print(sample)

            # Check if sample matches "hello" command
            #if sample == [1463, 1613, 1752, 1882, 2003, 2116, 2222, 2322, 2416, 2504, 2587, 2666, 2741, 2813, 2882, 2949, 3014, 3078, 3139, 3200, 3259, 3317, 3374, 3430, 3485, 3539, 3592, 3644, 3695, 3746, 3795, 3844, 3892, 3939, 3985, 4031, 4076, 4120, 4163, 4206, 4248, 4289, 4330, 4370, 4410, 4449, 4488, 4526, 4563, 4600, 4637, 4673, 4709, 4744, 4779, 4814, 4848, 4882, 4915, 4948, 4980, 5012, 5044, 5075, 5106, 5136, 5166, 5196, 5225, 5254, 5283, 5311, 5339, 5367, 5394, 5421, 5448, 5475, 5501, 5527, 5553, 5579, 5604, 5629, 5654, 5679, 5703, 5727, 5751]:
            #if sample == [1423, 1893, 2347, 2792, 3210, 3606, 3977, 4324, 4647, 4952, 5241, 5516, 5777, 6026, 6264, 6492, 6710, 6920, 7122, 7316, 7504, 7686, 7862, 8033, 8200, 8362, 8520, 8673, 8823, 8970, 9113, 9253, 9391, 9525, 9657, 9787, 9915, 10041, 10165, 10288, 10409, 10529, 10647, 10765, 10881, 10996, 11110, 11223, 11335, 11446, 11556, 11665, 11773, 11881, 11987, 12093, 12198, 12303, 12406, 12509, 12612, 12714, 12816, 12917, 13018, 13118, 13218, 13318, 13417, 13516, 13615, 13714, 13812, 13910, 14008, 14106, 14203, 14300, 14397, 14494, 14590, 14687, 14783, 14879, 14974, 15070, 15165, 15260, 15355, 15450, 15545, 15639, 15733, 15827, 15921, 16014, 16108]:
            break
